{"version":3,"file":"index.es.js","sources":["../src/utils/log.js","../src/utils/uuid-v4.js","../src/utils/presets.js","../src/stores/cookie.js","../src/stores/local-storage.js","../src/stores/index.js","../src/set.js","../src/get.js","../src/index.js"],"sourcesContent":["module.exports = ({ debug }) => (...args) => {\n  if (debug) {\n    const [msg, ...otherArgs] = args\n\n    console.log(`anonymousId.${msg}`, ...otherArgs)\n  }\n}\n","const dec2hex = []\n\nfor (let i = 0; i <= 15; i++) {\n  dec2hex.push(i.toString(16))\n}\n\nfunction uuid() {\n  let value = ''\n\n  for (var i = 1; i <= 36; i++) {\n    if (i === 9 || i === 14 || i === 19 || i === 24) {\n      value += '-'\n    } else if (i === 15) {\n      value += 4\n    } else if (i === 20) {\n      value += dec2hex[(Math.random() * 4) | (0 + 8)]\n    } else {\n      value += dec2hex[(Math.random() * 15) | 0]\n    }\n  }\n\n  return value\n}\n\nmodule.exports = uuid\n","const uuid = require('./uuid-v4')\n\nconst segment = {\n  stores: ['cookie', 'localStorage'],\n  key: 'ajs_anonymous_id',\n  generateId: (prefix = 'ajs') => [prefix, uuid()].join('-'),\n  mutate: true,\n  persist: true\n}\n\nmodule.exports = {\n  segment\n}\n","function getAll(cookie = '') {\n  const cookieParts = cookie.split('; ')\n  const cookies = {}\n\n  if (\n    cookieParts.length === 0 ||\n    (cookieParts.length === 1 && cookieParts[0] === '')\n  ) {\n    return cookies\n  }\n\n  for (let i = 0; i < cookieParts.length; i++) {\n    const [key, value] = cookieParts[i].split('=')\n\n    // remove quotes from stringified id\n    cookies[key] = (decodeURIComponent(value) || '').replace(/\"/g, '')\n  }\n\n  return cookies\n}\n\nfunction get(opts = {}) {\n  const { key, cookie } = opts\n  const cookies = getAll(cookie)\n\n  return cookies[key]\n}\n\nfunction browserSet({ name, value, expires, domain, path, secure }) {\n  let valueToUse\n\n  if (value !== undefined && typeof value === 'object')\n    valueToUse = JSON.stringify(value)\n  else valueToUse = encodeURIComponent(value)\n\n  document.cookie =\n    name +\n    '=' +\n    valueToUse +\n    (expires ? '; expires=' + new Date(expires).toUTCString() : '') +\n    '; path=' +\n    (path || '/') +\n    (domain ? '; domain=' + domain : '') +\n    (secure ? '; secure' : '')\n}\n\nfunction set(opts = {}) {\n  const { key, id, mutate, domain } = opts\n  let { cookie } = opts\n  let isBrowser = false\n\n  try {\n    cookie = document.cookie\n    isBrowser = true\n  } catch (err) {\n    // silence dom error\n    cookie = ''\n  }\n\n  if (isBrowser) {\n    browserSet({ name: key, value: id, path: '/', domain })\n  }\n\n  if (!mutate) {\n    cookie = `${cookie}`\n  }\n\n  const newCookie = `${key}=${encodeURIComponent(id)}`\n\n  return [cookie, newCookie].filter(Boolean).join('; ')\n}\n\nmodule.exports = {\n  get,\n  set\n}\n","function get(opts = {}) {\n  const { key, localStorage = {} } = opts\n\n  return localStorage.getItem ? localStorage.getItem(key) : localStorage[key]\n}\n\nfunction set(opts = {}) {\n  const { key, id, localStorage = {}, mutate } = opts\n  const storage = mutate ? localStorage : Object.assign({}, localStorage)\n\n  if (storage.setItem) {\n    storage.setItem(key, id)\n  } else {\n    storage[key] = id\n  }\n\n  return storage\n}\n\nmodule.exports = {\n  get,\n  set\n}\n","const cookie = require('./cookie')\nconst localStorage = require('./local-storage')\n\nmodule.exports = {\n  get: {\n    cookie: cookie.get,\n    localStorage: localStorage.get\n  },\n  set: {\n    cookie: cookie.set,\n    localStorage: localStorage.set\n  }\n}\n","const Log = require('./utils/log')\nconst presets = require('./utils/presets')\nconst { set: storeSetters } = require('./stores')\n\nmodule.exports = function set(opts = {}) {\n  let { id, debug, preset = 'segment', cookie, localStorage, domain } = opts\n  let log = Log({ debug })\n\n  if (!presets[preset]) {\n    // TODO: notify unknown preset\n    preset = 'segment'\n  }\n\n  const { generateId, key, stores, mutate } = presets[preset]\n\n  if (!id) {\n    id = generateId()\n    log(`set: created new id {id: \"${id}\"}`)\n  } else {\n    log(`set: using {id: \"${id}\"}`)\n  }\n\n  let result\n\n  if (!localStorage) {\n    try {\n      localStorage = window.localStorage\n    } catch (err) {\n      // silence window error\n    }\n  }\n\n  try {\n    result = storeId({\n      debug,\n      key,\n      id,\n      stores,\n      mutate,\n      cookie,\n      localStorage,\n      domain\n    })\n    result.status = 'success'\n  } catch (error) {\n    log(`set: error`, error)\n    result = {\n      status: 'error',\n      error\n    }\n  }\n\n  return result\n}\n\nfunction storeId(opts = {}) {\n  const { debug, key, id, stores, mutate, cookie, localStorage, domain } = opts\n  const result = {}\n  const log = Log({ debug })\n\n  for (const store of stores) {\n    try {\n      const storeSet = storeSetters[store]\n      const value = storeSet({ key, id, mutate, cookie, localStorage, domain })\n\n      if (value) {\n        log(`set.${store}: success {id: \"${id}\"}`)\n        result[store] = value\n      } else {\n        log(`set.${store}: fail {id: \"${id}\"}`)\n      }\n    } catch (err) {\n      // TODO: Handle unknown error trying to store id\n      log(`set.${store}: fail {id: \"${id}\"}`)\n      console.error(err)\n    }\n  }\n\n  return result\n}\n","const Log = require('./utils/log')\nconst presets = require('./utils/presets')\nconst { get: storeGetters } = require('./stores')\nconst set = require('./set')\n\nmodule.exports = function get(opts = {}) {\n  let { debug, preset = 'segment', env = '', cookie, localStorage } = opts\n  let log = Log({ debug })\n\n  if (!presets[preset]) {\n    // TODO: notify unknown preset\n    preset = 'segment'\n  }\n\n  const { generateId, key, stores, persist } = presets[preset]\n\n  if (isBrowser({ env })) {\n    if (!localStorage) {\n      try {\n        localStorage = window.localStorage\n      } catch (err) {\n        // silence error\n      }\n    }\n\n    if (!cookie) {\n      try {\n        cookie = document.cookie\n      } catch (err) {\n        // silence error\n      }\n    }\n\n    const browserId = getBrowserId({\n      debug,\n      stores,\n      key,\n      cookie,\n      localStorage\n    })\n\n    if (browserId) {\n      log(`get: found browser id {id: \"${browserId}\"}`)\n      return browserId\n    }\n  } else {\n    // check for req\n  }\n\n  const newId = generateId()\n\n  if (persist) {\n    log(`get: persisting new id {id: \"${newId}\"}`)\n\n    set({\n      debug,\n      key,\n      id: newId,\n      // pass references directly\n      cookie: opts.cookie,\n      localStorage: opts.localStorage\n    })\n  }\n\n  return newId\n}\n\nfunction isBrowser(opts = {}) {\n  const { env } = opts\n\n  return env === 'browser' || typeof window !== 'undefined'\n}\n\nfunction getBrowserId({ debug, stores, key, cookie, localStorage }) {\n  const log = Log({ debug })\n\n  for (const store of stores) {\n    const storeGet = storeGetters[store]\n    const value = storeGet({ key, cookie, localStorage })\n\n    if (value) {\n      log(`get.browser: hit {store: \"${store}\", key: \"${key}\"}`)\n      return value\n    } else {\n      log(`get.browser: miss {store: \"${store}\", key: \"${key}\"}`)\n    }\n  }\n\n  return ''\n}\n","const getAnonymousId = require('./get')\nconst setAnonymousId = require('./set')\n\nfunction anonymousId(opts) {\n  if (typeof opts === 'string' || typeof opts === 'number') {\n    return setAnonymousId({ id: opts })\n  } else if (typeof opts === 'object') {\n    if (typeof opts.id !== 'undefined') {\n      return setAnonymousId(opts)\n    } else {\n      return getAnonymousId(opts)\n    }\n  } else {\n    return getAnonymousId()\n  }\n}\n\nanonymousId.get = getAnonymousId\nanonymousId.set = setAnonymousId\n\nmodule.exports = anonymousId\n"],"names":["debug","args","msg","otherArgs","log","dec2hex","i","push","toString","uuid","value","Math","random","segment","prefix","join","getAll","cookie","cookieParts","split","cookies","length","key","decodeURIComponent","replace","get","opts","browserSet","name","expires","domain","path","secure","valueToUse","undefined","JSON","stringify","encodeURIComponent","Date","toUTCString","set","id","mutate","isBrowser","document","err","newCookie","filter","Boolean","localStorage","getItem","storage","Object","assign","setItem","storeSetters","require$$0","preset","Log","presets","generateId","stores","result","window","storeId","status","error","store","storeSet","storeGetters","env","persist","browserId","getBrowserId","newId","storeGet","anonymousId","setAnonymousId","getAnonymousId"],"mappings":"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"}